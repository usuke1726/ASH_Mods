<Project>
    <ItemGroup>
        <Reference Include="Assembly-CSharp">
            <HintPath>$(DirectoryBuildPropsPath)\..\.lib\Assembly-CSharp.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="ModdingAPI">
            <HintPath>$(DirectoryBuildPropsPath)\..\.lib\ModdingAPI.dll</HintPath>
            <Private>False</Private>
        </Reference>
    </ItemGroup>

    <PropertyGroup>
        <SourceDll>$(TargetDir)\$(TargetName).dll</SourceDll>
        <LibDir>$([System.IO.Path]::Combine("$(DirectoryBuildPropsPath)", "../.lib/preloads"))</LibDir>
        <DestinationDll>$(LibDir)\$(TargetName).preload.dll</DestinationDll>
    </PropertyGroup>

    <Target Name="AfterBuild">
        <Copy SourceFiles="$(SourceDll)" DestinationFiles="$(DestinationDll)" ContinueOnError="true" />
        <Message Text="Copied!" Importance="high" />
    </Target>
</Project>